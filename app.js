var t={9:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(276)),o=function(){function t(t){this.photo=t,this.url=null}return t.prototype.revokeURL=function(){null!=this.url&&(URL.revokeObjectURL(this.url),this.url=null)},t.prototype.createURL=function(){return this.revokeURL(),URL.createObjectURL(this.photo)},t.prototype.applyToPreview=function(){i.default.instance.preview.applyPhoto(this),i.default.instance.photodate.setDate(new Date(this.photo.lastModified))},t}();e.default=o},88:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(252)),o=r(n(276)),s=function t(){var e=this;this.camera=null,t.instance=this,this.dsicamerabutton=new i.default(document.getElementById("dsicamerabutton"),function(){document.getElementById("menuscreen").style.display="none",document.getElementById("menufooter").style.display="none",e.camera=new o.default}),this.dsisoundbutton=new i.default(document.getElementById("dsisoundbutton"),function(){})};e.default=s,new s},252:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.div=t,this.div.addEventListener("click",function(){e()})}return Object.defineProperty(t.prototype,"selected",{get:function(){return this.div.classList.contains("dsimenubutton_selected")},set:function(t){t?this.div.classList.contains("dsimenubutton_selected")||this.div.classList.add("dsimenubutton_selected"):this.div.classList.remove("dsimenubutton_selected")},enumerable:!1,configurable:!0}),t}();e.default=n},276:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},o=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof l?l(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}},s=this&&this.__await||function(t){return this instanceof s?(this.v=t,this):new s(t)},a=this&&this.__asyncDelegator||function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:s(t[r](e)),done:!1}:i?i(e):e}:i}},u=this&&this.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(t){return function(e){return Promise.resolve(e).then(t,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(t,e){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})},e&&(r[t]=e(r[t])))}function u(t,e){try{(n=i[t](e)).value instanceof s?Promise.resolve(n.value.v).then(l,c):d(o[0][2],n)}catch(t){d(o[0][3],t)}var n}function l(t){u("next",t)}function c(t){u("throw",t)}function d(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var d=c(n(744)),h=c(n(9)),f=c(n(914)),p=c(n(812)),y=c(n(532)),v=c(n(644)),m=c(n(566)),b=function(){function t(){var e=this;this.currentGridItemSelected=-1,this.photos=[],t.instance=this,"chrome"in window||alert("Hi, please note that non chromium browsers aren't fully supported, so you may experience issues"),document.getElementById("camerafooter").style.display="inherit",document.getElementById("sdcardscreen-camera").style.display="inherit",document.getElementById("sdcardscreen-camera").style.display="inherit",document.body.style.backgroundImage='url("looping.png")',document.getElementById("navbar").style.backgroundColor="#82658a",this.dirselect=document.getElementById("dirselect"),this.preview=new m.default(document.getElementById("preview")),this.photodate=new v.default(document.getElementById("photodate")),this.galleryslider=document.getElementById("galleryslider"),this.sdcardbutton=new d.default(document.getElementById("sdcardbutton"),function(){e.sdcardbutton.selected=!0,e.filePick()})}return t.prototype.filePick=function(){var t=this;"showDirectoryPicker"in window?window.showDirectoryPicker().then(function(e){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getAllFiles(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),alert("Please ensure you are picking the root of your SD Card and not any folders inside of it."),this.sdcardbutton.selected=!1,[3,3];case 3:return[2]}})})}).catch(function(){t.sdcardbutton.selected=!1}):(this.dirselect.click(),this.dirselect.addEventListener("cancel",function(e){t.sdcardbutton.selected=!1}),this.dirselect.addEventListener("change",function(){null!=t.dirselect.files&&t.loadPreviewMenu(t.dirselect.files)}))},t.prototype.getAllFiles=function(t){return r(this,void 0,void 0,function(){var e,n,r,s,a,u,l,c,d,h,f;return i(this,function(i){switch(i.label){case 0:return e=[],[4,t.getDirectoryHandle("DCIM")];case 1:n=i.sent(),i.label=2;case 2:i.trys.push([2,7,8,13]),r=!0,s=o(this.getFilesRecursively(n)),i.label=3;case 3:return[4,s.next()];case 4:if(a=i.sent(),c=a.done)return[3,6];f=a.value,r=!1,u=f,e.push(u),i.label=5;case 5:return r=!0,[3,3];case 6:return[3,13];case 7:return l=i.sent(),d={error:l},[3,13];case 8:return i.trys.push([8,,11,12]),r||c||!(h=s.return)?[3,10]:[4,h.call(s)];case 9:i.sent(),i.label=10;case 10:return[3,12];case 11:if(d)throw d.error;return[7];case 12:return[7];case 13:return this.loadPreviewMenu(e),[2]}})})},t.prototype.getFilesRecursively=function(t){return u(this,arguments,function(){var e,n,r,u,c,d,h,f,p,y;return i(this,function(i){switch(i.label){case 0:return t instanceof FileSystemFileHandle?[4,s(t.getFile())]:[3,5];case 1:return null===(e=i.sent())?[3,4]:[4,s(e)];case 2:return[4,i.sent()];case 3:i.sent(),i.label=4;case 4:return[3,19];case 5:if(!(t instanceof FileSystemDirectoryHandle))return[3,19];i.label=6;case 6:i.trys.push([6,13,14,19]),n=!0,r=o(t.values()),i.label=7;case 7:return[4,s(r.next())];case 8:return u=i.sent(),(h=u.done)?[3,12]:(y=u.value,n=!1,c=y,[5,l(a(o(this.getFilesRecursively(c))))]);case 9:return[4,s.apply(void 0,[i.sent()])];case 10:i.sent(),i.label=11;case 11:return n=!0,[3,7];case 12:return[3,19];case 13:return d=i.sent(),f={error:d},[3,19];case 14:return i.trys.push([14,,17,18]),n||h||!(p=r.return)?[3,16]:[4,s(p.call(r))];case 15:i.sent(),i.label=16;case 16:return[3,18];case 17:if(f)throw f.error;return[7];case 18:return[7];case 19:return[2]}})})},t.prototype.loadPreviewMenu=function(e){for(var n=this,r=0;r<e.length;r++){var i=e[r];null!=i&&this.parseFile(i)}if(0==this.photos.length)return this.sdcardbutton.selected=!1,void alert("No photos were found.");for(document.getElementById("sdcardscreen-camera").style.display="none",document.getElementById("albumscreen").style.display="flex",document.getElementById("camerafooter").style.display="none",document.body.style.backgroundImage='url("looping_album.png")',document.getElementById("navbar").style.backgroundColor="#ff5900",this.photos.sort(function(t,e){return t.photo.lastModified-e.photo.lastModified}),document.getElementById("photoscount").innerText=""+this.photos.length,r=0;r<this.photos.length;r++){var o=this.photos[r];if(0!=r){var s=this.photos[r-1],a=new Date(o.photo.lastModified);new Date(s.photo.lastModified).getDay()!=a.getDay()&&t.griditems.push(new f.default(a))}else t.griditems.push(new f.default(new Date(o.photo.lastModified)));t.griditems.push(new y.default(o))}t.griditems.push(new p.default(document.getElementById("totalphotos"))),this.setGridItem(t.griditems.length-1),this.galleryslider.max=""+(t.griditems.length-1),this.galleryslider.addEventListener("input",function(t){n.setGridItem(n.galleryslider.valueAsNumber)}),requestAnimationFrame(t.instance.updatePreview)},t.prototype.setGridItem=function(e){this.currentGridItemSelected=e,this.galleryslider.valueAsNumber=this.currentGridItemSelected;var n=t.griditems[e];n instanceof y.default?(this.preview.img.style.opacity="1",this.photodate.div.style.opacity="1",n.photo.applyToPreview()):(this.photodate.div.style.opacity="0",this.preview.img.style.opacity="0")},t.prototype.updatePreview=function(){for(var e=0;e<t.griditems.length;e++)t.griditems[e].update();requestAnimationFrame(function(e){t.instance.updatePreview()})},t.prototype.parseFile=function(t){return r(this,void 0,void 0,function(){var e,n;return i(this,function(r){return e=t.name.startsWith("HNI_")&&t.name.endsWith(".JPG"),n=t.name.startsWith("IMG_")&&t.name.endsWith(".PNG"),(e||n)&&this.photos.push(new h.default(t)),[2]})})},t.griditems=[],t}();e.default=b},532:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var n=this,r=document.createElement("div");return r.classList.add("griditem","griditemphoto"),(n=t.call(this,r)||this).photo=e,document.getElementById("gallery").appendChild(r),n}return i(e,t),e.prototype.offscreenStyle=function(){t.prototype.offscreenStyle.call(this),this.div.style.backgroundImage="",this.photo.revokeURL()},e.prototype.onscreenStyle=function(){t.prototype.onscreenStyle.call(this),null==this.photo.url&&(this.photo.url=this.photo.createURL()),this.div.style.backgroundImage="url(".concat(this.photo.url,")")},e}(o(n(812)).default);e.default=s},566:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.img=t}return t.prototype.applyPhoto=function(t){null==t.url&&(t.url=t.createURL()),this.img.src=t.url},t}();e.default=n},644:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.div=t}return t.prototype.setDate=function(t){this.div.innerText=t.toLocaleString()},t}();e.default=n},744:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.div=t,this.div.addEventListener("click",function(){e()})}return Object.defineProperty(t.prototype,"selected",{get:function(){return this.div.classList.contains("cambutton_selected")},set:function(t){t?this.div.classList.contains("cambutton_selected")||this.div.classList.add("cambutton_selected"):this.div.classList.remove("cambutton_selected")},enumerable:!1,configurable:!0}),t}();e.default=n},812:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(276)),o=function(){function t(t){var e=this;this.id=i.default.griditems.length,console.log(this.id),this.div=t,this.div.addEventListener("click",function(t){i.default.instance.setGridItem(e.id)}),this.x=0,this.y=0}return t.prototype.update=function(){this.x=window.innerWidth/2-t.GRID_WIDTH/2,this.x+=-160*(i.default.instance.currentGridItemSelected-this.id);var e=(this.div.getBoundingClientRect().x+t.GRID_WIDTH/2)/window.innerWidth;e>.5&&(e=1-e),this.y=48*e,-200>this.x+t.GRID_WIDTH||this.x>window.innerWidth+200?this.offscreenStyle():this.onscreenStyle()},t.prototype.offscreenStyle=function(){this.div.style.display="none"},t.prototype.onscreenStyle=function(){this.div.style.display="inherit",i.default.instance.currentGridItemSelected==this.id?(this.div.style.border="8px ridge #ff9230",this.div.style.outline="2px solid white",this.div.style.borderRadius="8px"):(this.div.style.border="",this.div.style.outline="",this.div.style.borderRadius=""),this.div.style.left="".concat(this.x,"px"),this.div.style.top="".concat(this.y,"px")},t.GRID_WIDTH=128,t.GRID_HEIGHT=128,t}();e.default=o},914:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var n=document.createElement("div");n.classList.add("griditem","infogriditem");var r=document.createElement("div");r.classList.add("datearrow"),r.innerText="🡆",n.appendChild(r);var i=document.createElement("div");i.classList.add("datemonthday"),i.innerText=e.getDate()+"/"+e.getMonth(),n.appendChild(i);var o=document.createElement("div");return o.classList.add("dateyear"),o.innerText=e.getFullYear()+"",n.appendChild(o),document.getElementById("gallery").appendChild(n),t.call(this,n)||this}return i(e,t),e}(o(n(812)).default);e.default=s}},e={};!function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}(88);